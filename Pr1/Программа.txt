$NOMOD51
$INCLUDE (8051.MCU)

ADDR SET 0C00h  ; Начальный адрес
VALUE SET 33h   ; Контрольное значение

ORG 000h
CLR P3.0           ; Гашение светодиода ошибки
MOV DPTR,#ADDR     ; Загрузка начального адреса
MOV R1,#4          ; 4 цикла
MOV R0,#0          ; по 256 байт
TEST:MOV A,#VALUE  ; Запись контрольного значения
     MOVX @DPTR,A  ; в ОЗУ
     MOVX A,@DPTR  ; Чтение ячейки ОЗУ
     CJNE A,#VALUE,ERROR  ; Значение не совпадает с контрольным - ошибка
     INC DPTR      ; Переход к следующей ячейке
     DJNZ R0,TEST  ; Декремент счётчика внутреннего цикла
     DJNZ R1,TEST  ; Декремент счётчика внешнего цикла
JMP $   ; Зацикливание программы
ERROR:
SETB P3.0  ; Ошибка - зажечь светодиод
JMP $
END